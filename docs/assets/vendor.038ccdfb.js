function X(t){var n=0,e=t.children,r=e&&e.length;if(!r)n=1;else for(;--r>=0;)n+=e[r].value;t.value=n}function J(){return this.eachAfter(X)}function Q(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this}function Y(t,n){for(var e=this,r=[e],i,o,u=-1;e=r.pop();)if(t.call(n,e,++u,this),i=e.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function Z(t,n){for(var e=this,r=[e],i=[],o,u,c,l=-1;e=r.pop();)if(i.push(e),o=e.children)for(u=0,c=o.length;u<c;++u)r.push(o[u]);for(;e=i.pop();)t.call(n,e,++l,this);return this}function $(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r}function G(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})}function j(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function tt(t){for(var n=this,e=nt(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r}function nt(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function et(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function rt(){return Array.from(this)}function it(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function ot(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n}function*st(){var t=this,n,e=[t],r,i,o;do for(n=e.reverse(),e=[];t=n.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)e.push(r[i]);while(e.length)}function L(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=lt)):n===void 0&&(n=ct);for(var e=new x(t),r,i=[e],o,u,c,l;r=i.pop();)if((u=n(r.data))&&(l=(u=Array.from(u)).length))for(r.children=u,c=l-1;c>=0;--c)i.push(o=u[c]=new x(u[c])),o.parent=r,o.depth=r.depth+1;return e.eachBefore(R)}function ut(){return L(this).eachBefore(at)}function ct(t){return t.children}function lt(t){return Array.isArray(t)?t[1]:null}function at(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function R(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function x(t){this.data=t,this.depth=this.height=0,this.parent=null}x.prototype=L.prototype={constructor:x,count:J,each:Q,eachAfter:Z,eachBefore:Y,find:$,sum:G,sort:j,path:tt,ancestors:et,descendants:rt,leaves:it,links:ot,copy:ut,[Symbol.iterator]:st};function F(t){if(typeof t!="function")throw new Error;return t}var ft={depth:-1},I={};function ht(t){return t.id}function pt(t){return t.parentId}function ee(){var t=ht,n=pt;function e(r){var i=Array.from(r),o=i.length,u,c,l,s,a,h,f,p=new Map;for(c=0;c<o;++c)u=i[c],a=i[c]=new x(u),(h=t(u,c,r))!=null&&(h+="")&&(f=a.id=h,p.set(f,p.has(f)?I:a)),(h=n(u,c,r))!=null&&(h+="")&&(a.parent=h);for(c=0;c<o;++c)if(a=i[c],h=a.parent){if(s=p.get(h),!s)throw new Error("missing: "+h);if(s===I)throw new Error("ambiguous: "+h);s.children?s.children.push(a):s.children=[a],a.parent=s}else{if(l)throw new Error("multiple roots");l=a}if(!l)throw new Error("no root");if(l.parent=ft,l.eachBefore(function(d){d.depth=d.parent.depth+1,--o}).eachBefore(R),l.parent=null,o>0)throw new Error("cycle");return l}return e.id=function(r){return arguments.length?(t=F(r),e):t},e.parentId=function(r){return arguments.length?(n=F(r),e):n},e}function dt(t,n){return t.parent===n.parent?1:2}function C(t){var n=t.children;return n?n[0]:t.t}function E(t){var n=t.children;return n?n[n.length-1]:t.t}function _t(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function yt(t){for(var n=0,e=0,r=t.children,i=r.length,o;--i>=0;)o=r[i],o.z+=n,o.m+=n,n+=o.s+(e+=o.c)}function gt(t,n,e){return t.a.parent===n.parent?t.a:e}function S(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}S.prototype=Object.create(x.prototype);function wt(t){for(var n=new S(t,0),e,r=[n],i,o,u,c;e=r.pop();)if(o=e._.children)for(e.children=new Array(c=o.length),u=c-1;u>=0;--u)r.push(i=e.children[u]=new S(o[u],u)),i.parent=e;return(n.parent=new S(null,0)).children=[n],n}function re(){var t=dt,n=1,e=1,r=null;function i(s){var a=wt(s);if(a.eachAfter(o),a.parent.m=-a.z,a.eachBefore(u),r)s.eachBefore(l);else{var h=s,f=s,p=s;s.eachBefore(function(_){_.x<h.x&&(h=_),_.x>f.x&&(f=_),_.depth>p.depth&&(p=_)});var d=h===f?1:t(h,f)/2,y=d-h.x,w=n/(f.x+d+y),v=e/(p.depth||1);s.eachBefore(function(_){_.x=(_.x+y)*w,_.y=_.depth*v})}return s}function o(s){var a=s.children,h=s.parent.children,f=s.i?h[s.i-1]:null;if(a){yt(s);var p=(a[0].z+a[a.length-1].z)/2;f?(s.z=f.z+t(s._,f._),s.m=s.z-p):s.z=p}else f&&(s.z=f.z+t(s._,f._));s.parent.A=c(s,f,s.parent.A||h[0])}function u(s){s._.x=s.z+s.parent.m,s.m+=s.parent.m}function c(s,a,h){if(a){for(var f=s,p=s,d=a,y=f.parent.children[0],w=f.m,v=p.m,_=d.m,A=y.m,m;d=E(d),f=C(f),d&&f;)y=C(y),p=E(p),p.a=s,m=d.z+_-f.z-w+t(d._,f._),m>0&&(_t(gt(d,s,h),s,m),w+=m,v+=m),_+=d.m,w+=f.m,A+=y.m,v+=p.m;d&&!E(p)&&(p.t=d,p.m+=_-v),f&&!C(y)&&(y.t=f,y.m+=w-A,h=s)}return h}function l(s){s.x*=n,s.y=s.depth*e}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(r=!1,n=+s[0],e=+s[1],i):r?null:[n,e]},i.nodeSize=function(s){return arguments.length?(r=!0,n=+s[0],e=+s[1],i):r?[n,e]:null},i}var z="http://www.w3.org/1999/xhtml",k={svg:"http://www.w3.org/2000/svg",xhtml:z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function M(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),k.hasOwnProperty(n)?{space:k[n],local:t}:t}function mt(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===z&&n.documentElement.namespaceURI===z?n.createElement(t):n.createElementNS(e,t)}}function vt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function D(t){var n=M(t);return(n.local?vt:mt)(n)}function At(){}function P(t){return t==null?At:function(){return this.querySelector(t)}}function xt(t){typeof t!="function"&&(t=P(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],u=o.length,c=r[i]=new Array(u),l,s,a=0;a<u;++a)(l=o[a])&&(s=t.call(l,l.__data__,a,o))&&("__data__"in l&&(s.__data__=l.__data__),c[a]=s);return new g(r,this._parents)}function St(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Nt(){return[]}function Ct(t){return t==null?Nt:function(){return this.querySelectorAll(t)}}function Et(t){return function(){return St(t.apply(this,arguments))}}function zt(t){typeof t=="function"?t=Et(t):t=Ct(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u=n[o],c=u.length,l,s=0;s<c;++s)(l=u[s])&&(r.push(t.call(l,l.__data__,s,u)),i.push(l));return new g(r,i)}function Bt(t){return function(){return this.matches(t)}}function V(t){return function(n){return n.matches(t)}}var bt=Array.prototype.find;function Lt(t){return function(){return bt.call(this.children,t)}}function Rt(){return this.firstElementChild}function Ft(t){return this.select(t==null?Rt:Lt(typeof t=="function"?t:V(t)))}var It=Array.prototype.filter;function kt(){return Array.from(this.children)}function Mt(t){return function(){return It.call(this.children,t)}}function Dt(t){return this.selectAll(t==null?kt:Mt(typeof t=="function"?t:V(t)))}function Pt(t){typeof t!="function"&&(t=Bt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],u=o.length,c=r[i]=[],l,s=0;s<u;++s)(l=o[s])&&t.call(l,l.__data__,s,o)&&c.push(l);return new g(r,this._parents)}function q(t){return new Array(t.length)}function Vt(){return new g(this._enter||this._groups.map(q),this._parents)}function N(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}N.prototype={constructor:N,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function qt(t){return function(){return t}}function Ot(t,n,e,r,i,o){for(var u=0,c,l=n.length,s=o.length;u<s;++u)(c=n[u])?(c.__data__=o[u],r[u]=c):e[u]=new N(t,o[u]);for(;u<l;++u)(c=n[u])&&(i[u]=c)}function Tt(t,n,e,r,i,o,u){var c,l,s=new Map,a=n.length,h=o.length,f=new Array(a),p;for(c=0;c<a;++c)(l=n[c])&&(f[c]=p=u.call(l,l.__data__,c,n)+"",s.has(p)?i[c]=l:s.set(p,l));for(c=0;c<h;++c)p=u.call(t,o[c],c,o)+"",(l=s.get(p))?(r[c]=l,l.__data__=o[c],s.delete(p)):e[c]=new N(t,o[c]);for(c=0;c<a;++c)(l=n[c])&&s.get(f[c])===l&&(i[c]=l)}function Ht(t){return t.__data__}function Kt(t,n){if(!arguments.length)return Array.from(this,Ht);var e=n?Tt:Ot,r=this._parents,i=this._groups;typeof t!="function"&&(t=qt(t));for(var o=i.length,u=new Array(o),c=new Array(o),l=new Array(o),s=0;s<o;++s){var a=r[s],h=i[s],f=h.length,p=Ut(t.call(a,a&&a.__data__,s,r)),d=p.length,y=c[s]=new Array(d),w=u[s]=new Array(d),v=l[s]=new Array(f);e(a,h,y,w,v,p,n);for(var _=0,A=0,m,b;_<d;++_)if(m=y[_]){for(_>=A&&(A=_+1);!(b=w[A])&&++A<d;);m._next=b||null}}return u=new g(u,r),u._enter=c,u._exit=l,u}function Ut(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Wt(){return new g(this._exit||this._groups.map(q),this._parents)}function Xt(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function Jt(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,u=Math.min(i,o),c=new Array(i),l=0;l<u;++l)for(var s=e[l],a=r[l],h=s.length,f=c[l]=new Array(h),p,d=0;d<h;++d)(p=s[d]||a[d])&&(f[d]=p);for(;l<i;++l)c[l]=e[l];return new g(c,this._parents)}function Qt(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],u;--i>=0;)(u=r[i])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function Yt(t){t||(t=Zt);function n(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u=e[o],c=u.length,l=i[o]=new Array(c),s,a=0;a<c;++a)(s=u[a])&&(l[a]=s);l.sort(n)}return new g(i,this._parents).order()}function Zt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function $t(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Gt(){return Array.from(this)}function jt(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null}function tn(){let t=0;for(const n of this)++t;return t}function nn(){return!this.node()}function en(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,u=i.length,c;o<u;++o)(c=i[o])&&t.call(c,c.__data__,o,i);return this}function rn(t){return function(){this.removeAttribute(t)}}function on(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sn(t,n){return function(){this.setAttribute(t,n)}}function un(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function cn(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function ln(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function an(t,n){var e=M(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?on:rn:typeof n=="function"?e.local?ln:cn:e.local?un:sn)(e,n))}function O(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function fn(t){return function(){this.style.removeProperty(t)}}function hn(t,n,e){return function(){this.style.setProperty(t,n,e)}}function pn(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function dn(t,n,e){return arguments.length>1?this.each((n==null?fn:typeof n=="function"?pn:hn)(t,n,e==null?"":e)):_n(this.node(),t)}function _n(t,n){return t.style.getPropertyValue(n)||O(t).getComputedStyle(t,null).getPropertyValue(n)}function yn(t){return function(){delete this[t]}}function gn(t,n){return function(){this[t]=n}}function wn(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function mn(t,n){return arguments.length>1?this.each((n==null?yn:typeof n=="function"?wn:gn)(t,n)):this.node()[t]}function T(t){return t.trim().split(/^|\s+/)}function B(t){return t.classList||new H(t)}function H(t){this._node=t,this._names=T(t.getAttribute("class")||"")}H.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function K(t,n){for(var e=B(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function U(t,n){for(var e=B(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function vn(t){return function(){K(this,t)}}function An(t){return function(){U(this,t)}}function xn(t,n){return function(){(n.apply(this,arguments)?K:U)(this,t)}}function Sn(t,n){var e=T(t+"");if(arguments.length<2){for(var r=B(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?xn:n?vn:An)(e,n))}function Nn(){this.textContent=""}function Cn(t){return function(){this.textContent=t}}function En(t){return function(){var n=t.apply(this,arguments);this.textContent=n==null?"":n}}function zn(t){return arguments.length?this.each(t==null?Nn:(typeof t=="function"?En:Cn)(t)):this.node().textContent}function Bn(){this.innerHTML=""}function bn(t){return function(){this.innerHTML=t}}function Ln(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n==null?"":n}}function Rn(t){return arguments.length?this.each(t==null?Bn:(typeof t=="function"?Ln:bn)(t)):this.node().innerHTML}function Fn(){this.nextSibling&&this.parentNode.appendChild(this)}function In(){return this.each(Fn)}function kn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Mn(){return this.each(kn)}function Dn(t){var n=typeof t=="function"?t:D(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Pn(){return null}function Vn(t,n){var e=typeof t=="function"?t:D(t),r=n==null?Pn:typeof n=="function"?n:P(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function qn(){var t=this.parentNode;t&&t.removeChild(this)}function On(){return this.each(qn)}function Tn(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Hn(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Kn(t){return this.select(t?Hn:Tn)}function Un(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Wn(t){return function(n){t.call(this,n,this.__data__)}}function Xn(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function Jn(t){return function(){var n=this.__on;if(!!n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function Qn(t,n,e){return function(){var r=this.__on,i,o=Wn(n);if(r){for(var u=0,c=r.length;u<c;++u)if((i=r[u]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function Yn(t,n,e){var r=Xn(t+""),i,o=r.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var l=0,s=c.length,a;l<s;++l)for(i=0,a=c[l];i<o;++i)if((u=r[i]).type===a.type&&u.name===a.name)return a.value}return}for(c=n?Qn:Jn,i=0;i<o;++i)this.each(c(r[i],n,e));return this}function W(t,n,e){var r=O(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Zn(t,n){return function(){return W(this,t,n)}}function $n(t,n){return function(){return W(this,t,n.apply(this,arguments))}}function Gn(t,n){return this.each((typeof n=="function"?$n:Zn)(t,n))}function*jn(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,u;i<o;++i)(u=r[i])&&(yield u)}var te=[null];function g(t,n){this._groups=t,this._parents=n}function ne(){return this}g.prototype={constructor:g,select:xt,selectAll:zt,selectChild:Ft,selectChildren:Dt,filter:Pt,data:Kt,enter:Vt,exit:Wt,join:Xt,merge:Jt,selection:ne,order:Qt,sort:Yt,call:$t,nodes:Gt,node:jt,size:tn,empty:nn,each:en,attr:an,style:dn,property:mn,classed:Sn,text:zn,html:Rn,raise:In,lower:Mn,append:Dn,insert:Vn,remove:On,clone:Kn,datum:Un,on:Yn,dispatch:Gn,[Symbol.iterator]:jn};function ie(t){return typeof t=="string"?new g([[document.querySelector(t)]],[document.documentElement]):new g([[t]],te)}export{ee as a,ie as s,re as t};
